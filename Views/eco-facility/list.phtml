<!-- 1. Always start with header -->
<?php require_once '/../Views/template/header.phtml'; ?>

<!-- 2. Show notifications -->
<?php if (isset($_SESSION['success'])): ?>
    <div class="alert alert-success"><?= htmlspecialchars($_SESSION['success']) ?></div>
    <?php unset($_SESSION['success']); ?>
<?php endif; ?>


    <!-- Search Form -->
    <form method="get" class="mb-4">
        <input type="hidden" name="controller" value="ecoFacility">
        <input type="hidden" name="action" value="search">
        <div class="input-group">
            <label>
                <input type="text" name="keyword" class="form-control"
                       placeholder="Search facilities...">
            </label>
            <button class="btn btn-primary" type="submit">Search</button>
        </div>
    </form>


<!-- Results List -->
<div class="row">
    <?php foreach ($facilities as $facility): ?>
        <div class="col-md-4 mb-4">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">
                        <?= htmlspecialchars($facility['title'] ?? 'No title') ?>
                    </h5>
                    <p class="card-text">
                        <?= htmlspecialchars($facility['category'] ?? 'Uncategorized') ?>
                    </p>
                    <a href="index.phpcontroller=ecoFacility&action=view&id=<?= $facility['id'] ?? '' ?>"
                       class="btn btn-sm btn-primary">
                        View Details
                    </a>
                </div>
            </div>
        </div>
    <?php endforeach; ?>
</div>